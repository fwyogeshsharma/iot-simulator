â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                          â•‘
â•‘     Nginx + SSL Quick Setup - IoT Simulator             â•‘
â•‘                                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PREREQUISITES:
--------------
1. Two domains pointing to your server:
   - Frontend: app.yourdomain.com â†’ your-server-ip
   - Backend:  api.yourdomain.com â†’ your-server-ip

2. Ports 80 and 443 open in firewall
3. Docker containers running (ports 3000 & 4200)


QUICK SETUP (3 STEPS):
-----------------------

Step 1: Run the setup script
   $ chmod +x setup-nginx-ssl.sh
   $ sudo ./setup-nginx-ssl.sh

   (Enter your domains and email when prompted)

Step 2: Update frontend environment
   $ nano frontend/iot-simulator-frontend/src/environments/environment.prod.ts

   Change:
   backendUrl: 'http://localhost:3000/api'

   To:
   backendUrl: 'https://api.yourdomain.com/api'

Step 3: Rebuild frontend
   $ docker compose down
   $ docker compose up -d --build frontend


ACCESS YOUR APP:
----------------
Frontend: https://app.yourdomain.com
Backend:  https://api.yourdomain.com


VERIFY DNS BEFORE SETUP:
-------------------------
$ dig app.yourdomain.com
$ dig api.yourdomain.com

(Should show your server's IP address)


COMMON COMMANDS:
----------------
Check Nginx:        sudo systemctl status nginx
Reload Nginx:       sudo systemctl reload nginx
Check SSL:          sudo certbot certificates
Renew SSL:          sudo certbot renew
View logs:          sudo tail -f /var/log/nginx/error.log


WHAT THE SCRIPT DOES:
---------------------
âœ“ Installs Nginx
âœ“ Installs Certbot (Let's Encrypt)
âœ“ Configures reverse proxy
âœ“ Obtains SSL certificates
âœ“ Sets up auto-renewal
âœ“ Configures firewall


ARCHITECTURE:
-------------
Internet
    â†“ HTTPS
[Nginx]
    â”œâ”€â†’ app.yourdomain.com â†’ localhost:4200 (Frontend)
    â””â”€â†’ api.yourdomain.com â†’ localhost:3000 (Backend)


TROUBLESHOOTING:
----------------
SSL failed?
  â†’ Check DNS: dig yourdomain.com
  â†’ Check port 80: sudo ufw status
  â†’ Retry: sudo certbot --nginx -d yourdomain.com

Can't access app?
  â†’ Check Nginx: sudo systemctl status nginx
  â†’ Check logs: sudo tail -f /var/log/nginx/error.log
  â†’ Test backend: curl https://api.yourdomain.com


SECURITY NOTES:
---------------
- SSL certificates auto-renew every 60 days
- HTTPS redirect is automatic
- CORS headers configured for API
- Firewall configured for HTTP/HTTPS


FOR DETAILED INSTRUCTIONS:
---------------------------
See: NGINX_SSL_SETUP.md


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Production-ready HTTPS setup in minutes! ğŸš€
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
